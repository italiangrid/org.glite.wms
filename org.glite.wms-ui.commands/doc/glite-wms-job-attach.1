.\" PLEASE DO NOT MODIFY THIS FILE! It was generated by raskman version: 1.1.0
.TH GLITE-WMS-JOB-ATTACH "1" "GLITE-WMS-JOB-ATTACH" "GLITE User Guide"

.SH NAME:
glite-wms-job-attach

.SH SYNOPSIS
.B glite-wms-job-attach
[\fIoptions\fR] <\fIjobId\fR>

.HP
\fB--version\fR
.HP
\fB--help\fR
.HP
\fB--config\fR, \fB-c\fR
<configfile>
.HP
\fB--vo\fR
<voname>
.HP
\fB--debug\fR
.HP
\fB--logfile\fR
<filepath>
.HP
\fB--noint\fR
.HP
\fB--version\fR
.HP
\fB--help\fR
.HP
\fB--config\fR, \fB-c\fR
<configfile>
.HP
\fB--debug\fR
.HP
\fB--logfile\fR
<filepath>
.HP
\fB--noint\fR
.HP
\fB--input\fR, \fB-i\fR
<filepath>
.HP
\fB--nolisten\fR
.HP
\fB--nogui\fR
.HP
\fB--port\fR, \fB-p\fR
<<port number>>


.SH DESCRIPTION

This commands starts a listener process on the UI machine (grid_console_shadow) that allows attaching to the standard streams of a previously submitted interactive job and displays them on a dedicated window. As the command opens a X window, the user should make sure the DISPLAY environment variable is correctly set and if she/he is connected to the UI node from remote machine (e.g. with ssh) enable secure X11 tunneling
.SH OPTIONS
.HP
\fB--version\fR

.IP
displays WMProxy client and servers version numbers.
If the --endpoint option is specified only this service is contacted to retrieve its version. If it is not used, the endpoint contacted is that one specified with GLITE_WMS_WMPROXY_ENDPOINT environment variable. If the option is not specified and the environment variable is not set, all servers listed in the WMProxyEndPoints attribute of the user configuration file are contacted. For each of these service, the returned result will be displayed on the standard output (the version numbers in case of success; otherwise the error message).
.PP
.HP
\fB--help\fR

.IP
displays command usage
.PP
.HP
\fB--config\fR, \fB-c\fR
<configfile>

.IP
if the command is launched with this option, the configuration file pointed by configfile is used. This option is meaningless when used together with "--vo" option
.PP
.HP
\fB--vo\fR
<voname>

.IP
this option allows the user to specify the Virtual Organisation she/he is currently working for.
If the user proxy contains VOMS extensions then the VO specified through this option is overridden by the
default VO contained in the proxy (i.e. this option is only useful when working with non-VOMS proxies).
.PP
.HP
\fB--debug\fR

.IP
when this option is specified, debugging information is displayed on the standard output and written also either into the default log file:

glite-wms-job-<command_name>_<uid>_<pid>_<time>.log

located under the /var/tmp directory or in the log file specified with --logfile option.
.PP
.HP
\fB--logfile\fR
<filepath>

.IP
When this option is specified, a command log file (whose pathname is filepath) is created.
.PP
.HP
\fB--noint\fR

.IP
if this option is specified, every interactive question to the user is skipped and the operation is continued (when possible)
.PP
.HP
\fB--version\fR

.IP
displays UI version.
.PP
.HP
\fB--help\fR

.IP
displays command usage
.PP
.HP
\fB--config\fR, \fB-c\fR
<configfile>

.IP
if the command is launched with this option, the configuration file pointed by configfile is used. This option is meaningless when used together with "--vo" option
.PP
.HP
\fB--debug\fR

.IP
When this option is specified, debugging information is displayed on the standard output and written into the log file, whose location is eventually printed on screen.
The default UI logfile location is:
glite-wms-job-<command_name>_<uid>_<pid>_<time>.log  located under the /var/tmp directory
please notice that this path can be overriden with the '--logfile' option
.PP
.HP
\fB--logfile\fR
<filepath>

.IP
when this option is specified, all information is written into the specified file pointed by filepath.
This option will override the default location of the logfile:
glite-wms-job-<command_name>_<uid>_<pid>_<time>.log  located under the /var/tmp directory
.PP
.HP
\fB--noint\fR

.IP
if this option is specified, every interactive question to the user is skipped and the operation is continued (when possible)
.PP
.HP
\fB--input\fR, \fB-i\fR
<filepath>

.IP
Allow the user to select the JobId(s) from an input file located in filepath.
The list of jobIds contained in the file is displayed and the user is prompted for a choice. Single jobs can be selected specifying the numbers associated to the job identifiers separated by commas. E.g. selects the first,the third and the fifth jobId in the list.
Ranges can also be selected specifying ends separated by a dash. E.g. selects jobIds in the list from third position (included) to sixth position (included). It is worth mentioning that it is possible to select at the same time ranges and single jobs. E.g. selects the first job id in the list, the ids from the third to the fifth (ends included) and finally the eighth one.
When specified toghether with '--noint', all available JobId are selected.
This option cannot be used when one or more jobIds have been specified as extra command argument
.PP
.HP
\fB--nolisten\fR

.IP
This option can be used only for interactive jobs. It makes the command forward the job standard streams coming from the WN to named pipes on the client machine whose names are returned to the user together with the OS id of the listener process. This allows the user to interact with the job through her/his own tools. It is important to note that when this option is specified, the command has no more control over the launched listener process that has hence to be killed by the user (through the returned process id) once the job is finished.
.PP
.HP
\fB--nogui\fR

.IP
This option can be used only for interactive jobs. As the command for such jobs opens an X window, the user should make sure that an X server is running on the local machine and if she/he is connected to the UI node from a remote machine (e.g. with ssh) enable secure X11 tunneling.
If this is not possible, the user can specify the --nogui option that makes the command provide a simple standard non-graphical interaction with the running job.
.PP
.HP
\fB--port\fR, \fB-p\fR
<<port number>>

.IP
make sthe command start a listener on the local machine on the specified port and logs these information to the
LB associated to the job.
.PP

.SH FILES

One of the following paths must exist, seeked with the specified order (only for LB related commands):
- $GLITE_WMS_LOCATION/etc/
- $GLITE_LOCATION/etc/
- /opt/glite/etc/
- /usr/local/etc/
- /etc/

and contain the following UI configuration files:
glite_wmsui_cmd_var.conf, glite_wmsui_cmd_err.conf, glite_wmsui_cmd_help.conf

- glite_wmsui_cmd_var.conf will contain custom configuration default values
A different configuration file may be specified either by using the --config option or by setting the GLITE_WMSUI_COMMANDS_CONFIG environment variable
here follows a possible example:
[
RetryCount = 3 ;
ErrorStorage= "/tmp" ;
OutputStorage="/tmp";
ListenerStorage = "/tmp" ;
LoggingTimeout = 30 ;
LoggingSyncTimeout = 30 ;
NSLoggerLevel = 0;
DefaultStatusLevel = 1 ;
DefaultLogInfoLevel = 1;
]

- glite_wmsui_cmd_err.conf will contain UI exception mapping between error codes and error messages (no relocation possible)

- glite_wmsui_cmd_help.conf will contain UI long-help information (no relocation possible)


glite_wmsui.conf:

The user interface configuration file. The standard path location is  (seeked with the specified order):
- $GLITE_WMS_LOCATION/etc/<voName>
- $GLITE_LOCATION/etc/<voName>
- /opt/glite/etc/<voName>
- /usr/local/etc/<voName>

here follows a possible example:
[
JdlDefaultAttributes = [
virtualorganisation="infngrid";
requirements = other.GlueCEStateStatus == "Production";
retryCount = 3;
rank = -other.GlueCEStateEstimatedResponseTime;
];
DelegationId = "luca";
ErrorStorage="${GLITE_LOCATION_LOG}";
OutputStorage="/tmp";
ListenerStorage="${GLITE_LOCATION_TMP}";
WMProxyEndPoints = {"https://ghemon.cnaf.infn.it:7443/glite_wms_wmproxy_server"};
LBAddress = "ghemon.cnaf.infn.it:9000";
MyProxyServer="kuiken.nikhef.nl";
LBServiceDiscoveryType ="org.glite.lb.server";
WMProxyServiceDiscoveryType="org.glite.wms.wmproxy";
]

Different configuration files can be specified by either using the --config option or setting the GLITE_WMSUI_COMMANDS_CONFIG environment variable or creating a user configuration file glite_wmsui.conf in the path $HOME/<user>/.glite/<voName>

/tmp/x509up_u<uid>: A valid X509 user proxy; use the X509_USER_PROXY environment variable to override the default location

JDL: file The file (containing the description of the job in the JDL language located in the path specified by jdl_file (the last argument of this command); multiple jdl files can be used with the --collection option

Besides those files, a valid proxy must be found inside the following path:
/tmp/x509up_u<uid> ( use the X509_USER_PROXY environment variable to override the default location JDL file)
.SH ENVIRONMENT

GLITE_WMSUI_COMMANDS_CONFIG:  This variable may be set to specify the path location of the custom default attribute configuration

GLITE_WMS_LOCATION:  This variable must be set when the Glite WMS installation is not located in the default paths: either /opt/glite or /usr/local

GLITE_LOCATION: This variable must be set when the Glite installation is not located in the default paths: either Â /opt/glite or /usr/local

GLITE_WMS_WMPROXY_ENDPOINT: This variable may be set to specify the endpoint URL (only for Wms related commands)

GLOBUS_LOCATION: This variable must be set when the Globus installation is not located in the default path /opt/globus

GLOBUS_TCP_PORT_RANGE="<val min> <val max>": This variable must be set to define a range of ports to be used for inbound connections in the interactivity context

X509_CERT_DIR: This variable may be set to override the default location of the trusted certificates directory, which is normally /etc/grid-security/certificates

X509_USER_PROXY: This variable may be set to override the default location of the user proxy credentials, which is normally /tmp/x509up_u<uid>.

GLITE_SD_PLUGIN: If Service Discovery querying is needed, this variable can be used in order to set a specific (or more) plugin, normally bdii, rgma (or both, separated by comma)

LCG_GFAL_INFOSYS: If Service Discovery querying is needed, this variable cbe used in order to set a specific Server where to perform the queries: for instance LCG_GFAL_INFOSYS='gridit-bdii-01.cnaf.infn.it:2170'
.SH AUTHORS

Alessandro Maraschini , Marco Sottilaro (egee@datamat.it)
