#!/bin/sh

EDG_WL_LOCATION=${EDG_WL_LOCATION:-@prefix@}
. "${EDG_WL_LOCATION}/etc/edg-wl-vars.sh"
export EDG_WL_TMP

if [ "$1" == "hourly" ] ; then
  # Execute the "purger" command at every day except on Sunday with a frequency
  # of one hour if and only if the percentage of allocated blocks is greater 
  #than 40%
  $EDG_WL_LOCATION/sbin/edg-wl-purgeStorage -l $EDG_WL_LOCATION_VAR/log/edg-wl-purgeStorage.log -t 604800 -a 40 -p $EDG_WL_TMP/SandboxDir
elif [ "$1" == "weekly" ] ; then
  # Execute the "purger" command at 4:00 AM, 8:00 AM, 12:00 noon, 4:00 PM,
  # and 8:00 PM (0 */4) on each Sunday (sun).
  $EDG_WL_LOCATION/sbin/edg-wl-purgeStorage -l $EDG_WL_LOCATION_VAR/log/edg-wl-purgeStorage.log -t 604800 -p $EDG_WL_TMP/SandboxDir
fi
