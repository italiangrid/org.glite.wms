#!/bin/sh

SCRIPT_LOCATION=@prefix@/etc/init.d
WMS_PREFIX=glite-wms

if [ -f ${SCRIPT_LOCATION}/${WMS_PREFIX}-locallogger ]; then
  ${SCRIPT_LOCATION}/${WMS_PREFIX}-locallogger status >/dev/null
  if [ $? -ne 0 ]; then
    ${SCRIPT_LOCATION}/${WMS_PREFIX}-locallogger restart
  fi
fi

if [ -f ${SCRIPT_LOCATION}/${WMS_PREFIX}-lbserver ]; then
  ${SCRIPT_LOCATION}/${WMS_PREFIX}-lbserver status >/dev/null
  if [ $? -ne 0 ]; then
    ${SCRIPT_LOCATION}/${WMS_PREFIX}-lbserver restart
  fi
fi

if [ -f ${SCRIPT_LOCATION}/${WMS_PREFIX}-proxyrenewal ]; then
  ${SCRIPT_LOCATION}/${WMS_PREFIX}-proxyrenewal status >/dev/null
  if [ $? -ne 0 ]; then
    ${SCRIPT_LOCATION}/${WMS_PREFIX}-proxyrenewal restart
  fi
fi

if [ -f ${SCRIPT_LOCATION}/${WMS_PREFIX}-lm ]; then
  ${SCRIPT_LOCATION}/${WMS_PREFIX}-lm status >/dev/null
  if [ $? -eq 1 ]; then
    ${SCRIPT_LOCATION}/${WMS_PREFIX}-lm restart
  fi
fi

if [ -f ${SCRIPT_LOCATION}/${WMS_PREFIX}-jc ]; then
  ${SCRIPT_LOCATION}/${WMS_PREFIX}-jc status >/dev/null
  if [ $? -eq 1 ]; then
    ${SCRIPT_LOCATION}/${WMS_PREFIX}-jc restart
  fi
fi

if [ -f ${SCRIPT_LOCATION}/${WMS_PREFIX}-ns ]; then
  ${SCRIPT_LOCATION}/${WMS_PREFIX}-ns status >/dev/null
  if [ $? -eq 1 ]; then
    ${SCRIPT_LOCATION}/${WMS_PREFIX}-ns restart
  fi
fi

if [ -f ${SCRIPT_LOCATION}/${WMS_PREFIX}-wm ]; then
  ${SCRIPT_LOCATION}/${WMS_PREFIX}-wm status >/dev/null
  if [ $? -eq 1 ]; then
    ${SCRIPT_LOCATION}/${WMS_PREFIX}-wm restart
  fi
fi
