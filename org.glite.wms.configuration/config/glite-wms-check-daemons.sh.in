#!/bin/sh

SCRIPT_LOCATION=${GLITE_LOCATION}/etc/init.d
WMS_PREFIX=glite-wms
LB_PREFIX=glite-lb
PROXY_PREFIX=glite-proxy

if [ -f ${SCRIPT_LOCATION}/${LB_PREFIX}-locallogger ]; then
  ${SCRIPT_LOCATION}/${LB_PREFIX}-locallogger status >/dev/null
  if [ $? -ne 0 ]; then
    ${SCRIPT_LOCATION}/${LB_PREFIX}-locallogger restart
  fi
fi

if [ -f ${SCRIPT_LOCATION}/${LB_PREFIX}-bkserverd ]; then
  ${SCRIPT_LOCATION}/${LB_PREFIX}-bkserverd status >/dev/null
  if [ $? -ne 0 ]; then
    ${SCRIPT_LOCATION}/${LB_PREFIX}-bkserverd restart
  fi
fi

if [ -f ${SCRIPT_LOCATION}/${PROXY_PREFIX}-proxy-renewd ]; then
  ${SCRIPT_LOCATION}/${PROXY_PREFIX}-proxy-renewd status >/dev/null
  if [ $? -ne 0 ]; then
    ${SCRIPT_LOCATION}/${PROXY_PREFIX}-proxy-renewd restart
  fi
fi

if [ -f ${SCRIPT_LOCATION}/${WMS_PREFIX}-lm ]; then
  ${SCRIPT_LOCATION}/${WMS_PREFIX}-lm status >/dev/null
  if [ $? -eq 1 ]; then
    ${SCRIPT_LOCATION}/${WMS_PREFIX}-lm restart
  fi
fi

if [ -f ${SCRIPT_LOCATION}/${WMS_PREFIX}-jc ]; then
  ${SCRIPT_LOCATION}/${WMS_PREFIX}-jc status >/dev/null
  if [ $? -eq 1 ]; then
    ${SCRIPT_LOCATION}/${WMS_PREFIX}-jc restart
  fi
fi

if [ -f ${SCRIPT_LOCATION}/${WMS_PREFIX}-ns ]; then
  ${SCRIPT_LOCATION}/${WMS_PREFIX}-ns status >/dev/null
  if [ $? -eq 1 ]; then
    ${SCRIPT_LOCATION}/${WMS_PREFIX}-ns restart
  fi
fi


if [ -f ${SCRIPT_LOCATION}/${WMS_PREFIX}-ice ]; then
 ${SCRIPT_LOCATION}/${WMS_PREFIX}-ice status >/dev/null
if [ $? -eq 1 ]; then
 ${SCRIPT_LOCATION}/${WMS_PREFIX}-ice restart
fi
fi


if [ -f ${SCRIPT_LOCATION}/${WMS_PREFIX}-wm ]; then
  ${SCRIPT_LOCATION}/${WMS_PREFIX}-wm status >/dev/null
  if [ $? -eq 1 ]; then
    ${SCRIPT_LOCATION}/${WMS_PREFIX}-wm restart
  fi
fi
